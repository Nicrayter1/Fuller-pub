<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üç∏ Fuller Pub - –£—á–µ—Ç —Å—Ç–æ–∫–æ–≤</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üç∏</text></svg>">
    
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º CSS —Ñ–∞–π–ª—ã -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- –î–ª—è –∏–∫–æ–Ω–æ–∫ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å Font Awesome (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- –®–ê–ü–ö–ê (–≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞) -->
        <div class="app-header" id="appHeader" style="display: none;">
            <div class="app-title">
                <span style="font-size: 28px;">üç∏</span>
                <h1>Fuller Pub - –£—á–µ—Ç —Å—Ç–æ–∫–æ–≤</h1>
            </div>
            <div class="user-info" id="userInfo">
                <div class="user-avatar" id="userAvatar">U</div>
                <div>
                    <div id="userName">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
                    <div style="font-size: 12px; opacity: 0.8;" id="userRole">–ë–∞—Ä–º–µ–Ω</div>
                </div>
                <button class="btn btn-sm btn-secondary" onclick="logout()" style="margin-left: 15px;">
                    –í—ã–π—Ç–∏
                </button>
            </div>
        </div>

        <!-- –û–°–ù–û–í–ù–û–ï –°–û–î–ï–†–ñ–ò–ú–û–ï -->
        <div class="main-content">
            <!-- –≠–ö–†–ê–ù –í–•–û–î–ê -->
            <div id="loginScreen">
                <div class="login-card">
                    <div class="login-logo">üç∏</div>
                    <h1 class="login-title">Fuller Pub</h1>
                    <p class="login-subtitle">–°–∏—Å—Ç–µ–º–∞ —É—á–µ—Ç–∞ –∞–ª–∫–æ–≥–æ–ª—å–Ω—ã—Ö —Å—Ç–æ–∫–æ–≤</p>
                    
                    <div class="alert" id="loginAlert"></div>
                    
                    <form id="loginForm">
                        <div class="form-group">
                            <label class="form-label" for="email">Email</label>
                            <input type="email" class="form-control" id="email" required
                                   placeholder="–≤–∞—à-email@example.com">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="password">–ü–∞—Ä–æ–ª—å</label>
                            <input type="password" class="form-control" id="password" required
                                   placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                        </div>
                        
                        <button type="submit" class="btn btn-primary btn-block" id="loginBtn">
                            <span>üîë –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É</span>
                        </button>
                    </form>
                    
                    <!-- –£–±—Ä–∞–ª–∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã –∏–∑ HTML -->
                    <div style="margin-top: 20px; text-align: center;">
                        <button class="btn btn-sm btn-secondary" onclick="showResetPassword()">
                            –ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?
                        </button>
                    </div>
                </div>
            </div>

            <!-- –û–°–ù–û–í–ù–û–ô –ò–ù–¢–ï–†–§–ï–ô–° -->
            <div id="mainScreen" style="display: none;">
                <!-- –°–¢–ê–¢–£–° -->
                <div class="alert" id="mainAlert"></div>
                
                <!-- –ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø -->
                <div class="control-panel" id="controlPanel">
                    <button class="btn btn-success" onclick="openAddModal('category')">
                        <span>üìÅ</span> –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                    </button>
                    <button class="btn btn-success" onclick="openAddModal('product')">
                        <span>‚ûï</span> –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç
                    </button>
                    <button class="btn btn-primary" onclick="refreshData()">
                        <span>üîÑ</span> –û–±–Ω–æ–≤–∏—Ç—å
                    </button>
                    <button class="btn btn-secondary" onclick="exportData()">
                        <span>üì•</span> –≠–∫—Å–ø–æ—Ä—Ç CSV
                    </button>
                    <button class="btn btn-warning" onclick="openUserManagement()" id="userManagementBtn" style="display: none;">
                        <span>üë•</span> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
                    </button>
                </div>
                
                <!-- –°–¢–ê–¢–ò–°–¢–ò–ö–ê -->
                <div class="stats-grid" id="statsGrid">
                    <div class="stat-card">
                        <div class="stat-label">–í—Å–µ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤</div>
                        <div class="stat-value" id="statProducts">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">–ö–∞—Ç–µ–≥–æ—Ä–∏–π</div>
                        <div class="stat-value" id="statCategories">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">–ë–∞—Ä 1 –æ—Å—Ç–∞—Ç–æ–∫</div>
                        <div class="stat-value" id="statBar1">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">–ë–∞—Ä 2 –æ—Å—Ç–∞—Ç–æ–∫</div>
                        <div class="stat-value" id="statBar2">0</div>
                    </div>
                </div>
                
                <!-- –§–ò–õ–¨–¢–†–´ -->
                <div class="filter-panel" id="filterPanel" style="margin-bottom: 20px; display: none;">
                    <select id="categoryFilter" class="form-control" style="max-width: 200px;" onchange="applyFilters()">
                        <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                    </select>
                    <select id="barFilter" class="form-control" style="max-width: 150px;" onchange="applyFilters()">
                        <option value="">–í—Å–µ –±–∞—Ä—ã</option>
                        <option value="bar1">–ë–∞—Ä 1</option>
                        <option value="bar2">–ë–∞—Ä 2</option>
                    </select>
                    <select id="stockFilter" class="form-control" style="max-width: 200px;" onchange="applyFilters()">
                        <option value="">–í—Å–µ –æ—Å—Ç–∞—Ç–∫–∏</option>
                        <option value="low">–ù–∏–∑–∫–∏–π –∑–∞–ø–∞—Å</option>
                        <option value="zero">–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</option>
                    </select>
                </div>
                
                <!-- –ü–û–ò–°–ö -->
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="üîç –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞...">
                </div>
                
                <!-- –ó–ê–ì–†–£–ó–ö–ê -->
                <div class="loader" id="dataLoader">
                    <div class="loader-spinner"></div>
                    <div>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>
                </div>
                
                <!-- –¢–ê–ë–õ–ò–¶–ê -->
                <div class="table-responsive" id="tableContainer">
                    <table id="stockTable">
                        <thead>
                            <tr>
                                <th style="width: 35%;">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
                                <th style="width: 15%;">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                <th style="width: 12%;">–û–±—ä–µ–º, –º–ª</th>
                                <th style="width: 17%;">–ë–∞—Ä 1 (—Ñ–∞–∫—Ç)</th>
                                <th style="width: 17%;">–ë–∞—Ä 2 (—Ñ–∞–∫—Ç)</th>
                                <th style="width: 4%;" id="actionsHeader"></th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            <!-- –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </tbody>
                    </table>
                </div>
                
                <!-- –ü–ê–ì–ò–ù–ê–¶–ò–Ø -->
                <div class="pagination" id="pagination" style="margin-top: 20px; display: none;">
                    <button id="prevBtn" onclick="changePage(-1)" disabled>‚óÄ –ù–∞–∑–∞–¥</button>
                    <span id="pageInfo">–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1 –∏–∑ 1</span>
                    <button id="nextBtn" onclick="changePage(1)" disabled>–í–ø–µ—Ä–µ–¥ ‚ñ∂</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –î–û–ë–ê–í–õ–ï–ù–ò–Ø -->
    <div class="modal" id="addModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="addModalTitle">–î–æ–±–∞–≤–∏—Ç—å</div>
                <button class="close-modal" onclick="closeAddModal()">√ó</button>
            </div>
            <div class="modal-body" id="addModalBody">
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ò–ù–§–û–†–ú–ê–¶–ò–ò -->
    <div class="modal" id="infoModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="infoModalTitle">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</div>
                <button class="close-modal" onclick="closeInfoModal()">√ó</button>
            </div>
            <div class="modal-body" id="infoModalBody">
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="closeInfoModal()">OK</button>
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –°–ë–†–û–°–ê –ü–ê–†–û–õ–Ø -->
    <div class="modal" id="resetPasswordModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</div>
                <button class="close-modal" onclick="closeResetPassword()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email</label>
                    <input type="email" class="form-control" id="resetEmail" 
                           placeholder="email@example.com">
                </div>
                <div class="alert" id="resetAlert"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeResetPassword()">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="sendResetPassword()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –£–ü–†–ê–í–õ–ï–ù–ò–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø–ú–ò -->
    <div class="modal" id="userManagementModal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <div class="modal-title">üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</div>
                <button class="close-modal" onclick="closeUserManagement()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="alert" id="userManagementAlert"></div>
                <div class="form-group">
                    <button class="btn btn-success" onclick="openAddUserModal()">
                        <span>‚ûï</span> –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    </button>
                </div>
                <div class="table-responsive" style="max-height: 400px; overflow-y: auto;">
                    <table>
                        <thead>
                            <tr>
                                <th>–ò–º—è</th>
                                <th>Email</th>
                                <th>–†–æ–ª—å</th>
                                <th>–ë–∞—Ä</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="userManagementTable">
                            <!-- –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º JavaScript –æ—Ç–¥–µ–ª—å–Ω–æ -->
    <script src="config.js"></script>
    <script src="app.js"></script>
</body>
</html>
